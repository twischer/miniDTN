suite:
    logbase: /sample/logbase
    logpattern: date-tag
    contikibase: /sample/contikibase
    contikiscm: git # Here only git and none are supported at the moment
    testcases:
        - generate-bundles-20
        - generate-bundles-80
        - generate-bundles-20-uninstr
        - generate-bundles-80-uninstr
        - mmem-test
        - mmem-test-uninstr
        - throughput
        - throughput-uninstr
        - contiki-net

# List of devices
# Each device has a name, a class (type of device), a path and an id
devices:
  - name: sender
    class: INGA
    path: /dev/inga/0
    id: 0
  - name: receiver
    class: INGA
    path: /dev/inga/1
    id: 1

tests:
### MMEM testing
  - name: mmem-test
    timeout: 60
    devices:
      - name: sender
        programdir: examples/mmem-test
        program: mmem-test
        instrument: [examples/mmem-test/mmem-test.c,core/lib/mmem.c]
        cflags: "-fno-inline"
        graph_options: ""
  - name: mmem-test-uninstr
    timeout: 60
    devices:
      - name: sender
        programdir: examples/mmem-test
        program: mmem-test
        instrument: []
        cflags: ""
        graph_options: ""
### Bundle generation tests with 20 and 80 bytes
  - name: generate-bundles-20
    timeout: 60
    devices:
      - name: sender
        programdir: examples/uDTN/generate-bundles
        program: uDTN-generate-bundles
        instrument: [examples/uDTN/generate-bundles/uDTN-generate-bundles.c,core/net/uDTN/bundle.c]
        cflags: "-fno-inline -DDATASIZE=20"
        graph_options: ""
  - name: generate-bundles-80
    timeout: 60
    devices:
      - name: sender
        programdir: examples/uDTN/generate-bundles
        program: uDTN-generate-bundles
        instrument: [examples/uDTN/generate-bundles/uDTN-generate-bundles.c,core/net/uDTN/bundle.c]
        cflags: "-fno-inline -DDATASIZE=80"
        graph_options: ""
  - name: generate-bundles-20-uninstr
    timeout: 60
    devices:
      - name: sender
        programdir: examples/uDTN/generate-bundles
        program: uDTN-generate-bundles
        instrument: []
        cflags: "-DDATASIZE=20"
        graph_options: ""
  - name: generate-bundles-80-uninstr
    timeout: 60
    devices:
      - name: sender
        programdir: examples/uDTN/generate-bundles
        program: uDTN-generate-bundles
        instrument: []
        cflags: "-DDATASIZE=80"
        graph_options: ""
### Storage tests
### Test throughput and latency
  - name: throughput
    timeout: 500
    devices:
      - name: sender
        programdir: examples/uDTN/sender
        program: uDTN-sender
        instrument: [examples/uDTN/sender/uDTN-sender.c,platform/inga/*.c,core/net/uDTN/*.c]
        cflags: "-fno-inline"
        graph_options: ""
      - name: receiver
        programdir: examples/uDTN/sink
        program: uDTN-sink
        instrument: [examples/uDTN/sink/uDTN-sink.c,platform/inga/*.c,core/net/uDTN/*.c]
        cflags: "-fno-inline"
        graph_options: ""
  - name: throughput-uninstr
    devices:
      - name: sender
        programdir: examples/uDTN/sender
        program: uDTN-sender
        instrument: []
        cflags: ""
        graph_options: ""
      - name: receiver
        programdir: examples/uDTN/sink
        program: uDTN-sink
        instrument: []
        cflags: ""
        graph_options: ""
### Basic test to verify profiling infrastructure
  - name: profile-test
    timeout: 160
    devices:
      - name: sender
        programdir: examples/profile-test
        program: profile-test
        instrument: [examples/profile-test/profile-test.c,core/dev/leds.c,cpu/avr/leds-arch.c]
        cflags: "-fno-inline"
        graph_options: ""
### Basically the throughput test with the contiki network stack instrumented
  - name: contiki-net
    timeout: 500
    devices:
      - name: sender
        programdir: examples/uDTN/sender
        program: uDTN-sender
        instrument: [cpu/avr/radio/rf230bb/rf230bb.c,examples/uDTN/sender/uDTN-sender.c,core/net/uDTN/*.c]
        cflags: "-fno-inline -finstrument-functions-exclude-function-list=radio_get_trx_state,rf230_isidle,rf230_waitidle,rf230_set_promiscuous_mode,rf230_is_ready_to_send,flushrx,RELEASE_LOCK,set_txpower,calibrate_rc_osc_32k,rf230_off,rf230_on,rf230_get_channel,rf230_set_channel,rf230_listen_channel,rf230_set_pan_addr,rf230_interrupt,rf230_set_txpower,rf230_get_txpower,rf230_get_raw_rssi,rf230_receiving_packet,rf230_pending_packet"
        graph_options: ""
      - name: receiver
        programdir: examples/uDTN/sink
        program: uDTN-sink
        instrument: [cpu/avr/radio/rf230bb/rf230bb.c,examples/uDTN/sink/uDTN-sink.c,core/net/uDTN/*.c]
        cflags: "-fno-inline -finstrument-functions-exclude-function-list=radio_get_trx_state,rf230_isidle,rf230_waitidle,rf230_set_promiscuous_mode,rf230_is_ready_to_send,flushrx,RELEASE_LOCK,set_txpower,calibrate_rc_osc_32k,rf230_off,rf230_on,rf230_get_channel,rf230_set_channel,rf230_listen_channel,rf230_set_pan_addr,rf230_interrupt,rf230_set_txpower,rf230_get_txpower,rf230_get_raw_rssi,rf230_receiving_packet,rf230_pending_packet"
        graph_options: ""
